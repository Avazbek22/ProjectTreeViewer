<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:ProjectTreeViewer.Avalonia.ViewModels"
             xmlns:converters="using:ProjectTreeViewer.Avalonia.Converters"
             x:Class="ProjectTreeViewer.Avalonia.Views.SettingsPanelView"
             x:DataType="vm:MainWindowViewModel">
  <UserControl.Resources>
    <converters:FontFamilyDisplayNameConverter x:Key="FontFamilyDisplayNameConverter" />
  </UserControl.Resources>
  <Border Width="320" Classes="panel" IsVisible="{Binding SettingsVisible}" IsEnabled="{Binding IsProjectLoaded}">
    <Grid RowDefinitions="Auto,*,*,*">
      <!-- Font section - Auto height -->
      <StackPanel Grid.Row="0" Spacing="6">
        <TextBlock Classes="section-title" Text="{Binding SettingsFont}" FontSize="15"/>
        <ComboBox ItemsSource="{Binding FontFamilies}" SelectedItem="{Binding PendingFontFamily, Mode=TwoWay}">
          <ComboBox.ItemTemplate>
            <DataTemplate>
              <TextBlock Text="{Binding Converter={StaticResource FontFamilyDisplayNameConverter}}" />
            </DataTemplate>
          </ComboBox.ItemTemplate>
        </ComboBox>

        <Button Content="{Binding SettingsApply}" Click="OnApplySettings" Margin="0,10,0,0"/>
      </StackPanel>

      <!-- Ignore section - equal star height -->
      <Grid Grid.Row="1" RowDefinitions="Auto,*" Margin="0,10,0,0">
        <Grid Grid.Row="0" ColumnDefinitions="*,8,Auto" Margin="0,0,0,6">
          <TextBlock Classes="section-title" Grid.Column="0" Text="{Binding SettingsIgnoreTitle}" Margin="0" FontSize="15"/>
          <CheckBox Classes="section-all" Grid.Column="2" Content="{Binding SettingsAll}"
                    IsChecked="{Binding AllIgnoreChecked, Mode=TwoWay}"
                    Checked="OnIgnoreAllChanged" Unchecked="OnIgnoreAllChanged" />
        </Grid>
        <Border Grid.Row="1" Classes="checklist-border">
          <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <ItemsControl ItemsSource="{Binding IgnoreOptions}">
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <CheckBox Classes="list-item" Content="{Binding Label}"
                            IsChecked="{Binding IsChecked, Mode=TwoWay}" />
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
          </ScrollViewer>
        </Border>
      </Grid>

      <!-- Extensions section - equal star height -->
      <Grid Grid.Row="2" RowDefinitions="Auto,*" Margin="0,10,0,0">
        <Grid Grid.Row="0" ColumnDefinitions="*,8,Auto" Margin="0,0,0,6">
          <TextBlock Classes="section-title" Grid.Column="0" Text="{Binding SettingsExtensions}" Margin="0" FontSize="15"/>
          <CheckBox Classes="section-all" Grid.Column="2" Content="{Binding SettingsAll}"
                    IsChecked="{Binding AllExtensionsChecked, Mode=TwoWay}"
                    Checked="OnExtensionsAllChanged" Unchecked="OnExtensionsAllChanged" />
        </Grid>
        <Border Grid.Row="1" Classes="checklist-border">
          <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <ItemsControl ItemsSource="{Binding Extensions}">
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <CheckBox Classes="list-item" Content="{Binding Name}"
                            IsChecked="{Binding IsChecked, Mode=TwoWay}" />
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
          </ScrollViewer>
        </Border>
      </Grid>

      <!-- RootFolders section - equal star height -->
      <Grid Grid.Row="3" RowDefinitions="Auto,*" Margin="0,10,0,0">
        <Grid Grid.Row="0" ColumnDefinitions="*,8,Auto" Margin="0,0,0,6">
          <TextBlock Classes="section-title" Grid.Column="0" Text="{Binding SettingsRootFolders}" Margin="0" FontSize="15"/>
          <CheckBox Classes="section-all" Grid.Column="2" Content="{Binding SettingsAll}"
                    IsChecked="{Binding AllRootFoldersChecked, Mode=TwoWay}"
                    Checked="OnRootAllChanged" Unchecked="OnRootAllChanged" />
        </Grid>
        <Border Grid.Row="1" Classes="checklist-border">
          <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <ItemsControl ItemsSource="{Binding RootFolders}">
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <CheckBox Classes="list-item" Content="{Binding Name}"
                            IsChecked="{Binding IsChecked, Mode=TwoWay}" />
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
          </ScrollViewer>
        </Border>
      </Grid>
    </Grid>
  </Border>
</UserControl>
